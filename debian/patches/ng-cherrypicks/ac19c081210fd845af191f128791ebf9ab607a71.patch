From ac19c081210fd845af191f128791ebf9ab607a71 Mon Sep 17 00:00:00 2001
From: Justin Kinnaird <jkinnaird1991@gmail.com>
Date: Thu, 16 Feb 2017 03:44:35 -0600
Subject: [PATCH] Properly paint the RootWindow when no background is present. 
 (Fixes: IgnorantGuru#404)

---
 src/desktop/desktop-window.c | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/src/desktop/desktop-window.c b/src/desktop/desktop-window.c
index 848edb5..c30c4ad 100644
--- a/src/desktop/desktop-window.c
+++ b/src/desktop/desktop-window.c
@@ -818,7 +818,15 @@ void desktop_window_set_background( DesktopWindow* win, GdkPixbuf* src_pix, DWBg
         }
         else
         {
-            /* FIXME: Anyone knows how to handle this correctly??? */
+            XColor col;
+            col.flags = DoRed | DoGreen | DoBlue;
+            col.red = (unsigned short)win->bg.red;
+            col.green = (unsigned short)win->bg.green;
+            col.blue = (unsigned short)win->bg.blue;
+            if(XAllocColor(xdisplay, DefaultColormap(xdisplay, DefaultScreen(xdisplay)), &col) == 0) {
+                puts("XAllocColor failed.");
+            }
+            XSetWindowBackground(xdisplay, xroot, col.pixel);
         }
         XClearWindow( xdisplay, xroot );
 
