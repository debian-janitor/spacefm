From 003d4ef2a72e3a8bdd150b7b16a07e0f6eb1ec3d Mon Sep 17 00:00:00 2001
From: Justin Kinnaird <jkinnaird1991@gmail.com>
Date: Wed, 15 Feb 2017 23:27:00 -0600
Subject: [PATCH] Prevent possible crash when placing in bottom-right corner of
 desktop.  Fixes: IgnorantGuru#654

---
 src/desktop/desktop-window.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/desktop/desktop-window.c b/src/desktop/desktop-window.c
index 0ce60aa..848edb5 100644
--- a/src/desktop/desktop-window.c
+++ b/src/desktop/desktop-window.c
@@ -3151,14 +3151,16 @@ void on_file_created( VFSDir* dir, VFSFileInfo* file, gpointer user_data )
                         self->items = g_list_remove( self->items, ll->data );
                         break;
                     }
-                }                
+                }
             }
             else
             {
                 // dropped onto empty item, replace it
                 desktop_item_free( (DesktopItem*)self->insert_item );
                 l->data = item;
-                self->insert_item = l->next->data;
+                if(l->next != NULL) {
+                    self->insert_item = l->next->data;
+                } 
             }
         }
         else if ( self->renamed_item && !((DesktopItem*)self->renamed_item)->fi &&
