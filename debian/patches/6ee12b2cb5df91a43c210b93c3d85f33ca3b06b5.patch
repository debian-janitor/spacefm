From 6ee12b2cb5df91a43c210b93c3d85f33ca3b06b5 Mon Sep 17 00:00:00 2001
From: IgnorantGuru <ignorantguru@gmx.com>
Date: Tue, 19 Apr 2016 09:50:42 -0600
Subject: [PATCH] [GTK3.20] fix theme parse warnings re close btn css #636

---
 ChangeLog         | 1 +
 src/main-window.c | 7 ++++++-
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/ChangeLog b/ChangeLog
index 31bb9e4..6b6db38 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -2,6 +2,7 @@
     Rename dlg canonicalize Copy Target/Link Target target when possible
     [installer] fix mktemp template and error handling for busybox #629
     [GTK2] fix black background dir load regression 888a7735 #578 #627
+    [GTK3.20] fix theme parse warnings re close btn css #636
 1.0.5   2016-01-20:
     recreate too small cached thumbnails #584
     read $XDG_TEMPLATES_DIR via glib for user-dirs.dirs support #581
diff --git a/src/main-window.c b/src/main-window.c
index eb373ff..574a75f 100644
--- a/src/main-window.c
+++ b/src/main-window.c
@@ -2892,7 +2892,12 @@ GtkWidget* fm_main_window_create_tab_label( FMMainWindow* main_window,
             g_object_unref( pixbuf );
             //shorten tab since we have a 16 icon
             gtk_widget_set_size_request ( close_btn, 24, 20 );
-#if GTK_CHECK_VERSION (3, 0, 0)
+#if GTK_CHECK_VERSION (3, 20, 0)
+            /* code below produces Adwaita theme parse warnings on GTK >= 3.20
+             * Theme parsing error: <data>:2:28: The style property
+             * GtkButton:default-border is deprecated and shouldn't be used
+             * anymore. It will be removed in a future version  */
+#elif GTK_CHECK_VERSION (3, 0, 0)
             /* Code modified from gedit: gedit-close-button.c */
             static const gchar button_style[] =
                   "* {\n"
